# Invoked via: /task:list

description = "List tasks with optional filters (status, parent, tags, priority)"
prompt = """
<command>
<meta>
<id>task:list</id>
<description>List tasks with optional filters (status, parent, tags, priority)</description>
</meta>
<purpose>Lists tasks from vector-task storage with optional filters. Parses $ARGUMENTS for filters (status, parent_id, tags, priority), queries vector-task MCP, and displays formatted hierarchical task list with status/priority indicators.</purpose>
<purpose>Task creation specialist that analyzes user descriptions, researches context, estimates effort, and creates well-structured tasks after user approval.</purpose>
<guidelines>
<guideline id="role">
<text>Task listing utility that queries vector storage and displays formatted task hierarchy with status and priority indicators.</text>
</guideline>
<guideline id="workflow-step1">
<text>STEP 1 - Parse $ARGUMENTS for Filters</text>
<example>
<phase name="parse">Extract filters from $ARGUMENTS: status=pending, parent_id=5, tags=backend, priority=high, limit=20</phase>
<phase name="defaults">Default: no filters (list all), limit=50</phase>
<phase name="output">STORE-AS($FILTERS = '{status?, parent_id?, tags?, priority?, limit?, offset?}')</phase>
</example>
</guideline>
<guideline id="workflow-step2">
<text>STEP 2 - Query Vector Task Storage</text>
<example>
<phase name="query">mcp__vector-task__task_list('STORE-GET($FILTERS)')</phase>
<phase name="output">STORE-AS($TASKS = 'task list from vector storage')</phase>
</example>
</guideline>
<guideline id="workflow-step3">
<text>STEP 3 - Format and Display Task List</text>
<example>
<phase name="organize">Group tasks: root tasks (parent_id=null) first, then children indented under parents</phase>
<phase name="format">FOREACH(task in STORE-GET($TASKS)) → [Display: {status_icon} {priority_icon} #{id} {title} [{tags}] (est: {estimate})] → END-FOREACH</phase>
<phase name="summary">Show: total count, by status breakdown, by priority breakdown</phase>
</example>
</guideline>
<guideline id="status-icons">
<text>Status indicator mapping</text>
<example key="pending">[pending]</example>
<example key="in_progress">[in_progress]</example>
<example key="completed">[completed]</example>
<example key="stopped">[stopped]</example>
</guideline>
<guideline id="priority-icons">
<text>Priority indicator mapping</text>
<example key="critical">[critical]</example>
<example key="high">[high]</example>
<example key="medium">[medium]</example>
<example key="low">[low]</example>
</guideline>
<guideline id="output-format">
<text>Task display format</text>
<example>
<phase name="root">{status} {priority} #{id} {title} [{tags}]</phase>
<phase name="child">  └─ {status} {priority} #{id} {title} [{tags}]</phase>
<phase name="nested">    └─ {status} {priority} #{id} {title} [{tags}]</phase>
</example>
</guideline>
<guideline id="filter-examples">
<text>Supported filter combinations</text>
<example key="all">/task:list → all tasks</example>
<example key="status">/task:list status=pending → pending tasks only</example>
<example key="parent">/task:list parent_id=5 → children of task #5</example>
<example key="tags">/task:list tags=backend,api → tasks with specific tags</example>
<example key="priority">/task:list priority=high → high priority tasks</example>
<example key="combined">/task:list status=pending priority=critical → combined filters</example>
</guideline>
</guidelines>
</command>
"""