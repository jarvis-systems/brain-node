# Invoked via: /mem:search

description = "Semantic search memories with optional filters"
prompt = """
<command>
<meta>
<id>mem:search</id>
<description>Semantic search memories with optional filters</description>
</meta>
<purpose>Searches memories using semantic similarity from $ARGUMENTS query. Supports filters: category, limit, offset, tags. Displays results with similarity scores.</purpose>
<purpose>Semantic memory search with flexible filters. Displays results with similarity scores and content previews.</purpose>
<guidelines>
<guideline id="role">
<text>Semantic memory search utility that queries vector storage with optional filters and displays formatted results with similarity scores.</text>
</guideline>
<guideline id="workflow-step1">
<text>STEP 1 - Parse $ARGUMENTS for Query and Filters</text>
<example>
<phase name="format-1">Simple query: /mem:search "authentication patterns"</phase>
<phase name="format-2">With filters: /mem:search query="auth" category=code-solution limit=20</phase>
<phase name="format-3">With tags: /mem:search query="api" tags=laravel,php</phase>
<phase name="extract">Extract: query (required), category?, limit?, offset?, tags?</phase>
<phase name="defaults">Defaults: limit=10, offset=0</phase>
<phase name="output">STORE-AS($PARAMS = '{query, category?, limit, offset?, tags?}')</phase>
</example>
</guideline>
<guideline id="workflow-step2">
<text>STEP 2 - Execute Semantic Search</text>
<example>
<phase name="search">mcp__vector-memory__search_memories('STORE-GET($PARAMS)')</phase>
<phase name="store">STORE-AS($RESULTS = 'search results array')</phase>
</example>
</guideline>
<guideline id="workflow-step3">
<text>STEP 3 - Handle Empty Results</text>
<example>
<phase name="check">IF(STORE-GET($RESULTS) is empty) → THEN → [Display: "No memories found for: {query}" → Suggest: "Try broader search terms" → Suggest: "Remove category/tag filters" → Suggest: "Use /mem:list to see recent memories"] → END-IF</phase>
</example>
</guideline>
<guideline id="workflow-step4">
<text>STEP 4 - Format and Display Results</text>
<example>
<phase name="header">Display: "--- Memory Search Results ---"</phase>
<phase name="meta">Display: "Query: {query} | Found: {count} | Category: {category or all}"</phase>
<phase name="list">FOREACH(memory in STORE-GET($RESULTS)) → [Display: "#{id} [{category}] (similarity: {score})" → Display: "  {content_preview} (first 100 chars)" → Display: "  Tags: {tags} | Accessed: {access_count}x"] → END-FOREACH</phase>
<phase name="pagination">IF(more results available (total > limit + offset)) → THEN → [Display: "More results available. Use offset={next_offset} to see more"] → END-IF</phase>
</example>
</guideline>
<guideline id="output-format">
<text>Result display format</text>
<example key="header">--- Memory Search Results ---</example>
<example key="meta">Query: "auth patterns" | Found: 5 | Category: code-solution</example>
<example key="item-header">#{id} [{category}] (similarity: 0.85)</example>
<example key="item-content">  Content preview here...</example>
<example key="item-meta">  Tags: php, laravel | Accessed: 3x</example>
<example key="pagination">More results available. Use offset=10 to see more</example>
</guideline>
<guideline id="similarity-guide">
<text>Similarity score interpretation</text>
<example key="high">0.90-1.00: Highly relevant, almost exact match</example>
<example key="medium">0.75-0.89: Relevant, good semantic match</example>
<example key="low">0.50-0.74: Somewhat related, partial match</example>
<example key="weak">< 0.50: Weak match, may not be useful</example>
</guideline>
<guideline id="filter-examples">
<text>Supported filter combinations</text>
<example key="simple">/mem:search "query" → simple search</example>
<example key="category">/mem:search query="auth" category=bug-fix → filtered by category</example>
<example key="tags">/mem:search query="api" tags=laravel → filtered by tag</example>
<example key="limit">/mem:search query="cache" limit=20 → more results</example>
<example key="pagination">/mem:search query="db" offset=10 limit=10 → pagination</example>
</guideline>
</guidelines>
</command>
"""