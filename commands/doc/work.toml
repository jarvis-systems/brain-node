# Invoked via: /doc:work

description = "Interactive documentation command with maximum quality and user engagement"
prompt = """
<command>
<meta>
<id>doc:work</id>
<description>Interactive documentation command with maximum quality and user engagement</description>
</meta>
<purpose>Document anything specified in $ARGUMENTS with maximum quality, interactivity, and professional technical writing standards</purpose>
<purpose>The Work command is a guided workflow for writing documentation for a project.</purpose>
<iron_rules>
<rule id="max-interactivity" severity="critical">
<text>MUST engage user with clarifying questions via AskUserQuestion tool. NEVER assume.</text>
<why>Assumptions lead to misalignment and rework.</why>
<on_violation>Stop and ask clarifying question.</on_violation>
</rule>
<rule id="500-line-limit" severity="critical">
<text>Each file MUST NOT exceed 500 lines. Split into part-1.md, part-2.md if needed.</text>
<why>Maintains readability.</why>
<on_violation>Split content with clear naming and cross-references.</on_violation>
</rule>
<rule id="docs-folder-structure" severity="high">
<text>All documentation in .docs/ with hierarchy: features/, modules/, concepts/, architecture/, guides/, api/, tor/, reference/</text>
<why>Ensures organization and discoverability.</why>
<on_violation>Restructure to comply with folder hierarchy.</on_violation>
</rule>
<rule id="evidence-based" severity="high">
<text>Content MUST be based on codebase exploration, file reading, or verified web research.</text>
<why>Prevents speculation.</why>
<on_violation>Use Explore agent, Read tool, or Web Research Master first.</on_violation>
</rule>
<rule id="validation-checkpoints" severity="high">
<text>Obtain user approval at: structure proposal, first draft section, before finalization.</text>
<why>Ensures alignment with expectations.</why>
<on_violation>Pause and request validation.</on_violation>
</rule>
<rule id="yaml-front-matter" severity="critical">
<text>EVERY file MUST start with YAML front matter for brain docs indexing.</text>
<why>brain docs parses metadata for index and search.</why>
<on_violation>Add YAML front matter before markdown content.</on_violation>
</rule>
</iron_rules>
<guidelines>
<guideline id="arguments-format">
<text>$ARGUMENTS accepts: feature:X, module:X, concept:X, file:X, topic:X, or plain text description.</text>
</guideline>
<guideline id="phase-1-understanding">
<text>Phase 1: Understand what to document through maximum interactivity.</text>
<example>
<phase name="step-1">Parse $ARGUMENTS to identify target type and scope</phase>
<phase name="step-2">Ask: What aspects? What depth? Target audience? Use cases?</phase>
<phase name="step-3">Use AskUserQuestion until crystal clear</phase>
<phase name="validation">Requirements clarity >= 95%</phase>
</example>
</guideline>
<guideline id="phase-2-information-gathering">
<text>Phase 2: Gather comprehensive information.</text>
<example>
<phase name="step-1">Task(subagent_type="Explore") for codebase structure</phase>
<phase name="step-2">Read relevant files</phase>
<phase name="step-3">Search vector memory: mcp__vector-memory__search_memories</phase>
<phase name="step-4">If external context needed: Task(@agent-web-research-master)</phase>
<phase name="validation">Evidence-based content >= 95%</phase>
</example>
</guideline>
<guideline id="phase-3-structure-proposal">
<text>Phase 3: Propose structure and get approval.</text>
<example>
<phase name="step-1">Design folder hierarchy within .docs/</phase>
<phase name="step-2">Create outline: sections, code examples, diagrams</phase>
<phase name="step-3">Estimate length, plan multi-file split if > 500 lines</phase>
<phase name="step-4">AskUserQuestion for approval</phase>
<phase name="validation">User explicitly approves structure</phase>
</example>
</guideline>
<guideline id="phase-4-writing">
<text>Phase 4: Write professional documentation.</text>
<example>
<phase name="step-1">Write first major section</phase>
<phase name="step-2">Use TodoWrite to track progress</phase>
<phase name="step-3">Show first section to user for validation</phase>
<phase name="step-4">Continue based on feedback</phase>
<phase name="step-5">Include: code examples, architecture diagrams (text-based), use cases</phase>
<phase name="validation">Each section <= 500 lines, user validates first section</phase>
</example>
</guideline>
<guideline id="phase-5-finalization">
<text>Phase 5: Review, finalize, deliver.</text>
<example>
<phase name="step-1">Final review: 500-line limits, cross-references, completeness</phase>
<phase name="step-2">Create TOC if multi-file</phase>
<phase name="step-3">Present final for approval</phase>
<phase name="step-4">Store insights: mcp__vector-memory__store_memory</phase>
<phase name="step-5">Write files to .docs/</phase>
<phase name="validation">User approves final documentation</phase>
</example>
</guideline>
<guideline id="yaml-structure">
<text>Required YAML structure: name (required), description (required), part/type/date/version (optional).</text>
<example key="structure">---
name: "Document Title"
description: "Brief description"
part: 1
type: "guide"
date: "2025-11-20"
version: "1.0.0"
---</example>
</guideline>
<guideline id="professional-writing">
<text>Technical writing standards.</text>
<example key="language">Clear, concise language</example>
<example key="structure">Logical structure with proper hierarchy</example>
<example key="code">Code examples with context (minimal, only when cheaper than text)</example>
<example key="diagrams">Text-based architecture diagrams</example>
<example key="refs">Cross-references to related docs</example>
<example key="format">Proper markdown with syntax highlighting</example>
</guideline>
<guideline id="file-naming">
<text>Naming conventions: lowercase with hyphens, no spaces.</text>
<example key="single">Single: topic-name.md</example>
<example key="multi">Multi-part: topic-name-part-1.md, topic-name-part-2.md</example>
<example key="index">Index: README.md for folder overview</example>
</guideline>
<guideline id="cross-referencing">
<text>Use relative paths for cross-references.</text>
<example key="part">[See Part 2](./topic-name-part-2.md)</example>
<example key="concept">[Related concept](../concepts/delegation.md)</example>
</guideline>
<guideline id="tool-integration">
<text>Tool usage patterns.</text>
<example key="explore">Explore: Task(subagent_type="Explore", prompt="...")</example>
<example key="web">Web research: Task(@agent-web-research-master, "...")</example>
<example key="memory-search">Memory search: mcp__vector-memory__search_memories</example>
<example key="memory-store">Memory store: mcp__vector-memory__store_memory</example>
</guideline>
<guideline id="directive">
<text>Ask constantly! Explore thoroughly! Validate frequently! Write professionally!</text>
</guideline>
</guidelines>
</command>
"""