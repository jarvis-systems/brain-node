# Invoked via: /doc:work

description = "Interactive documentation command with maximum quality and user engagement"
prompt = """
<command>
<meta>
<id>doc:work</id>
<description>Interactive documentation command with maximum quality and user engagement</description>
</meta>
<purpose>Document anything specified in $ARGUMENTS with maximum quality, interactivity, and professional technical writing standards</purpose>
<purpose>The Work command is a guided workflow for writing documentation for a project.</purpose>
<iron_rules>
<rule id="max-interactivity" severity="critical">
<text>MUST engage user with clarifying questions via AskUserQuestion tool. NEVER assume.</text>
<why>Assumptions lead to misalignment and rework.</why>
<on_violation>Stop and ask clarifying question.</on_violation>
</rule>
<rule id="500-line-limit" severity="critical">
<text>Each file MUST NOT exceed 500 lines. Split into part-1.md, part-2.md if needed.</text>
<why>Maintains readability.</why>
<on_violation>Split content with clear naming and cross-references.</on_violation>
</rule>
<rule id="docs-folder-structure" severity="high">
<text>All documentation in .docs/ with hierarchy: features/, modules/, concepts/, architecture/, guides/, api/, tor/, reference/</text>
<why>Ensures organization and discoverability.</why>
<on_violation>Restructure to comply with folder hierarchy.</on_violation>
</rule>
<rule id="evidence-based" severity="high">
<text>Content MUST be based on codebase exploration, file reading, or verified web research.</text>
<why>Prevents speculation.</why>
<on_violation>Use Explore agent, Read tool, or Web Research Master first.</on_violation>
</rule>
<rule id="validation-checkpoints" severity="high">
<text>Obtain user approval at: structure proposal, first draft section, before finalization.</text>
<why>Ensures alignment with expectations.</why>
<on_violation>Pause and request validation.</on_violation>
</rule>
<rule id="yaml-front-matter" severity="critical">
<text>EVERY file MUST start with YAML front matter for brain docs indexing.</text>
<why>brain docs parses metadata for index and search.</why>
<on_violation>Add YAML front matter before markdown content.</on_violation>
</rule>
</iron_rules>
<guidelines>
<guideline id="arguments-format">
$ARGUMENTS accepts: feature:X, module:X, concept:X, file:X, topic:X, or plain text description.
</guideline>
<guideline id="phase-1-understanding">
Phase 1: Understand what to document through maximum interactivity.
## Examples
 - **step-1**: Parse $ARGUMENTS to identify target type and scope
 - **step-2**: Ask: What aspects? What depth? Target audience? Use cases?
 - **step-3**: Use AskUserQuestion until crystal clear
 - **validation**: Requirements clarity >= 95%
</guideline>
<guideline id="phase-2-information-gathering">
Phase 2: Gather comprehensive information.
## Examples
 - **step-1**: Task(subagent_type="Explore") for codebase structure
 - **step-2**: Read relevant files
 - **step-3**: Search vector memory: mcp__vector-memory__search_memories
 - **step-4**: If external context needed: Task(@agent-web-research-master)
 - **validation**: Evidence-based content >= 95%
</guideline>
<guideline id="phase-3-structure-proposal">
Phase 3: Propose structure and get approval.
## Examples
 - **step-1**: Design folder hierarchy within .docs/
 - **step-2**: Create outline: sections, code examples, diagrams
 - **step-3**: Estimate length, plan multi-file split if > 500 lines
 - **step-4**: AskUserQuestion for approval
 - **validation**: User explicitly approves structure
</guideline>
<guideline id="phase-4-writing">
Phase 4: Write professional documentation.
## Examples
 - **step-1**: Write first major section
 - **step-2**: Use TodoWrite to track progress
 - **step-3**: Show first section to user for validation
 - **step-4**: Continue based on feedback
 - **step-5**: Include: code examples, architecture diagrams (text-based), use cases
 - **validation**: Each section <= 500 lines, user validates first section
</guideline>
<guideline id="phase-5-finalization">
Phase 5: Review, finalize, deliver.
## Examples
 - **step-1**: Final review: 500-line limits, cross-references, completeness
 - **step-2**: Create TOC if multi-file
 - **step-3**: Present final for approval
 - **step-4**: Store insights: mcp__vector-memory__store_memory
 - **step-5**: Write files to .docs/
 - **validation**: User approves final documentation
</guideline>
<guideline id="yaml-structure">
Required YAML structure: name (required), description (required), part/type/date/version (optional).
## Examples
 - ---
name: "Document Title"
description: "Brief description"
part: 1
type: "guide"
date: "2025-11-20"
version: "1.0.0"
---
</guideline>
<guideline id="professional-writing">
Technical writing standards.
## Examples
 - Clear, concise language
 - Logical structure with proper hierarchy
 - Code examples with context (minimal, only when cheaper than text)
 - Text-based architecture diagrams
 - Cross-references to related docs
 - Proper markdown with syntax highlighting
</guideline>
<guideline id="file-naming">
Naming conventions: lowercase with hyphens, no spaces.
## Examples
 - Single: topic-name.md
 - Multi-part: topic-name-part-1.md, topic-name-part-2.md
 - Index: README.md for folder overview
</guideline>
<guideline id="cross-referencing">
Use relative paths for cross-references.
## Examples
 - [See Part 2](./topic-name-part-2.md)
 - [Related concept](../concepts/delegation.md)
</guideline>
<guideline id="tool-integration">
Tool usage patterns.
## Examples
 - Explore: Task(subagent_type="Explore", prompt="...")
 - Web research: Task(@agent-web-research-master, "...")
 - Memory search: mcp__vector-memory__search_memories
 - Memory store: mcp__vector-memory__store_memory
</guideline>
<guideline id="directive">
Ask constantly! Explore thoroughly! Validate frequently! Write professionally!
</guideline>
</guidelines>
</command>
"""