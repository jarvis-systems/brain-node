# Invoked via: /task:list

description = "List tasks with optional filters (status, parent, tags, priority)"
prompt = """
<command>
<meta>
<id>task:list</id>
<description>List tasks with optional filters (status, parent, tags, priority)</description>
</meta>
<purpose>Lists tasks from vector-task storage with optional filters. Parses $ARGUMENTS for filters (status, parent_id, tags, priority), queries vector-task MCP, and displays formatted hierarchical task list with status/priority indicators.</purpose>
<purpose>Task creation specialist that analyzes user descriptions, researches context, estimates effort, and creates well-structured tasks after user approval.</purpose>
<guidelines>
<guideline id="role">
Task listing utility that queries vector storage and displays formatted task hierarchy with status and priority indicators.
</guideline>
<guideline id="workflow-step1">
STEP 1 - Parse $ARGUMENTS for Filters
## Examples
 - **parse**: Extract filters from $ARGUMENTS: status=pending, parent_id=5, tags=backend, priority=high, limit=20
 - **defaults**: Default: no filters (list all), limit=50
 - **output**: STORE-AS($FILTERS = '{status?, parent_id?, tags?, priority?, limit?, offset?}')
</guideline>
<guideline id="workflow-step2">
STEP 2 - Query Vector Task Storage
## Examples
 - **query**: mcp__vector-task__task_list('STORE-GET($FILTERS)')
 - **output**: STORE-AS($TASKS = 'task list from vector storage')
</guideline>
<guideline id="workflow-step3">
STEP 3 - Format and Display Task List
## Examples
 - **organize**: Group tasks: root tasks (parent_id=null) first, then children indented under parents
 - **format**: FOREACH(task in STORE-GET($TASKS)) → [Display: {status_icon} {priority_icon} #{id} {title} [{tags}] (est: {estimate})] → END-FOREACH
 - **summary**: Show: total count, by status breakdown, by priority breakdown
</guideline>
<guideline id="status-icons">
Status indicator mapping
## Examples
 - [pending]
 - [in_progress]
 - [completed]
 - [stopped]
</guideline>
<guideline id="priority-icons">
Priority indicator mapping
## Examples
 - [critical]
 - [high]
 - [medium]
 - [low]
</guideline>
<guideline id="output-format">
Task display format
## Examples
 - **root**: {status} {priority} #{id} {title} [{tags}]
 - **child**:   └─ {status} {priority} #{id} {title} [{tags}]
 - **nested**:     └─ {status} {priority} #{id} {title} [{tags}]
</guideline>
<guideline id="filter-examples">
Supported filter combinations
## Examples
 - /task:list → all tasks
 - /task:list status=pending → pending tasks only
 - /task:list parent_id=5 → children of task #5
 - /task:list tags=backend,api → tasks with specific tags
 - /task:list priority=high → high priority tasks
 - /task:list status=pending priority=critical → combined filters
</guideline>
</guidelines>
</command>
"""